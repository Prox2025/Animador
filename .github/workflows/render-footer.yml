name: Remover fundo do vÃ­deo automÃ¡tico

on:
  workflow_dispatch:

jobs:
  download_and_remove_background:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ Clonar repositÃ³rio
      uses: actions/checkout@v4

    - name: ğŸ”§ Configurar Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'

    - name: ğŸš€ Instalar dependÃªncias Node.js
      run: npm install puppeteer

    - name: ğŸ› ï¸ Instalar FFmpeg e Python OpenCV
      run: |
        sudo apt update
        sudo apt install -y ffmpeg python3 python3-pip
        pip3 install opencv-python numpy

    - name: ğŸ“¥ Baixar vÃ­deo via Puppeteer
      run: node baixar_video.js

    - name: ğŸ Remover fundo do vÃ­deo (Python)
      run: python3 remover_fundo.py

    - name: ğŸ“¤ Publicar artefato (vÃ­deo final)
      uses: actions/upload-artifact@v4
      with:
        name: video_fundo_removido
        path: videos/video_fundo_removido.webm
