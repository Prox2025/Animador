name: Gravar Vídeo Animação

on:
  workflow_dispatch:
    inputs:
      url:
        description: 'URL da página com animação (ex: http://localhost:8000/index.html)'
        required: true
      entrada:
        description: 'Nome da animação de entrada (ex: fadeIn)'
        required: true
        default: 'fadeIn'
      saida:
        description: 'Nome da animação de saída (ex: fadeOut)'
        required: true
        default: 'fadeOut'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checar código (opcional)
        uses: actions/checkout@v3

      - name: Instalar Python e dependências
        uses: actions/setup-python@v4
        with:
          python-version: 3.10

      - name: Instalar pyppeteer
        run: |
          python -m pip install --upgrade pip
          pip install pyppeteer

      - name: Executar gravação vídeo
        run: |
          python grava_animacao.py "${{ github.event.inputs.url }}" "${{ github.event.inputs.entrada }}" "${{ github.event.inputs.saida }}"

      - name: Upload do vídeo gerado como artifact
        uses: actions/upload-artifact@v4
        with:
          name: video_animacao
          path: saida.webm
